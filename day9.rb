r=(0..9).map{[0,0]}
v=[]
$<.map{|x|d,b=x.split;(1..b.to_i).map{r[0][0]+=d==?U?1:d==?D?-1:0;r[0][1]+=d==?R?1:d==?L?-1:0;(1..9).map{|i|(r[i][0]+=r[i-1][0]>r[i][0]? 1:((r[i-1][0]<r[i][0])?-1:0);r[i][1]+=r[i-1][1]>r[i][1]? 1:((r[i-1][1]<r[i][1])?-1:0))if(r[i][0]-r[i-1][0])**2+(r[i][1]-r[i-1][1])**2>2;v.append [r[9][0],r[9][1]]}}}
p v.uniq.size