r=(0..9).map{[0,0]}
v=[]
$<.map{|x|d,b=x.split;(1..b.to_i).map{r[0][0]+=d==?U?1:d==?D?-1:0;r[0][1]+=d==?R?1:d==?L?-1:0;(1..9).map{|i|e=r[i];f=r[i-1];(e[0]+=f[0]>e[0]? 1:((f[0]<e[0])?-1:0);e[1]+=f[1]>e[1]? 1:((f[1]<e[1])?-1:0))if(e[0]-f[0])**2+(e[1]-f[1])**2>2;v.append r[9][0,2]}}}
p v.uniq.size